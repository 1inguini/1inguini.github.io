<!DOCTYPE HTML>
<html>

<head prefix="og:https://ogp.me/ns#">
    <meta charset="utf-8">
    <title>ブログ生成にHintつかいはじめました&Hakyll.loadAllSnapShotsで嵌まった</title>
    <meta property="og:site_name" content="linguiniのブログ">
    <meta property="og:image" content="https://avatars0.githubusercontent.com/u/42938754?s=400&amp;v=4">
    <meta property="og:title" content="ブログ生成にHintつかいはじめました&amp;Hakyll.loadAllSnapShotsで嵌まった">
    <meta property="og:description" content="Lucidからhtmlを生成するときにHint(Runtime Haskell interpreter)使うようにして新しい記事を作るたびにHakyllをビルドしなくてよくなった。Hakyll.loadAllSnapShotsは型がわからないと動かないので使ってるところを書く前はエラーが出るが型注釈を書けばエラーは消える">
    <meta content="summary" name="twitter:card">
    <meta content="blog" name="linguini">
    <meta content="Hakyll" name="generator">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="https://avatars0.githubusercontent.com/u/42938754" rel="icon">
    <link href="https://cdn.jsdelivr.net/npm/@exampledev/new.css/new.min.css" rel="stylesheet">
</head>

<body>
    <header>
        <h2><a href>linguiniの✨ブログ✨</a></h2>
    </header>
    <main>
        <article>
            <h2>ブログ生成にHintつかいはじめました&amp;Hakyll.loadAllSnapShotsで嵌まった</h2>
            <section>
                <h3>仮のTL;DR</h3>
                <p>Lucidからhtmlを生成するときにHint(Runtime Haskell interpreter)使うようにして新しい記事を作るたびにHakyllをビルドしなくてよくなった。Hakyll.loadAllSnapShotsは型がわからないと動かないので使ってるところを書く前はエラーが出るが型注釈を書けばエラーは消える</p><!-- Created by htmlize-1.56 in css mode. -->
                <style type="text/css">
                    <!--
                    body {
                        color: #c6c6c6;
                        background-color: #303030;
                    }

                    .haskell-constructor {
                        /* haskell-constructor-face */
                        color: #00d7af;
                    }

                    .haskell-definition {
                        /* haskell-definition-face */
                        color: #ffd700;
                    }

                    .haskell-keyword {
                        /* haskell-keyword-face */
                        color: #a1db00;
                    }

                    .haskell-operator {
                        /* haskell-operator-face */
                        color: #ff8700;
                    }

                    .haskell-pragma {
                        /* haskell-pragma-face */
                        color: #d18aff;
                    }

                    .haskell-type {
                        /* haskell-type-face */
                        color: #00d7af;
                    }

                    .rainbow-delimiters-depth-1 {
                        /* rainbow-delimiters-depth-1-face */
                        color: #9a4040;
                        font-weight: bold;
                    }

                    .rainbow-delimiters-depth-2 {
                        /* rainbow-delimiters-depth-2-face */
                        color: #ff5e5e;
                        font-weight: bold;
                    }

                    .rainbow-delimiters-depth-3 {
                        /* rainbow-delimiters-depth-3-face */
                        color: #ffaa77;
                        font-weight: bold;
                    }

                    .rainbow-indent-depth-1 {
                        /* rainbow-indent-depth-1-face */
                        color: #9a4040;
                    }

                    .rainbow-indent-depth-2 {
                        /* rainbow-indent-depth-2-face */
                        color: #ff5e5e;
                    }

                    .rainbow-indent-depth-3 {
                        /* rainbow-indent-depth-3-face */
                        color: #ffaa77;
                    }

                    .rainbow-indent-depth-4 {
                        /* rainbow-indent-depth-4-face */
                        color: #dddd77;
                    }

                    .rainbow-indent-depth-5 {
                        /* rainbow-indent-depth-5-face */
                        color: #80ee80;
                    }

                    .rainbow-indent-depth-6 {
                        /* rainbow-indent-depth-6-face */
                        color: #66bbff;
                    }

                    .rainbow-indent-depth-7 {
                        /* rainbow-indent-depth-7-face */
                        color: #da6bda;
                    }

                    .rainbow-indent-depth-8 {
                        /* rainbow-indent-depth-8-face */
                        color: #afafaf;
                    }

                    .rainbow-indent-depth-9 {
                        /* rainbow-indent-depth-9-face */
                        color: #f0f0f0;
                    }

                    .string {
                        /* font-lock-string-face */
                        color: #ff4ea3;
                    }

                    a {
                        color: inherit;
                        background-color: inherit;
                        font: inherit;
                        text-decoration: inherit;
                    }

                    a:hover {
                        text-decoration: underline;
                    }
                    -->
                </style>
                </head>

                <body>
                    <pre>
<span class="haskell-pragma">{-# LANGUAGE OverloadedStrings #-}</span>

<span class="haskell-keyword">module</span> <span class="haskell-constructor">Main</span> <span class="haskell-keyword">where</span>

<span class="haskell-keyword">import</span> <span class="haskell-constructor">Control.Arrow</span>
<span class="haskell-keyword">import</span> <span class="haskell-constructor">Control.Exception</span> <span class="rainbow-delimiters-depth-1">(</span><span class="haskell-constructor">Exception</span> <span class="rainbow-delimiters-depth-2">(</span>displayException<span class="rainbow-delimiters-depth-2">)</span><span class="rainbow-delimiters-depth-1">)</span>
<span class="haskell-keyword">import</span> <span class="haskell-keyword">qualified</span> <span class="haskell-constructor">Data.ByteString.Lazy.Char8</span> <span class="haskell-keyword">as</span> <span class="haskell-constructor">BS</span>
<span class="haskell-keyword">import</span> <span class="haskell-constructor">Data.Functor.Identity</span>
<span class="haskell-keyword">import</span> <span class="haskell-constructor">Data.String</span> <span class="rainbow-delimiters-depth-1">(</span><span class="haskell-constructor">IsString</span><span class="rainbow-delimiters-depth-1">)</span>
<span class="haskell-keyword">import</span> <span class="haskell-keyword">qualified</span> <span class="haskell-constructor">Data.Text.Lazy</span> <span class="haskell-keyword">as</span> <span class="haskell-constructor">Text</span>
<span class="haskell-keyword">import</span> <span class="haskell-constructor">Hakyll</span>
<span class="haskell-keyword">import</span> <span class="haskell-constructor">Language.Haskell.Interpreter</span> <span class="rainbow-delimiters-depth-1">(</span><span class="haskell-constructor">OptionVal</span> <span class="rainbow-delimiters-depth-2">(</span><span class="rainbow-delimiters-depth-3">(</span><span class="haskell-constructor">:=</span><span class="rainbow-delimiters-depth-3">)</span><span class="rainbow-delimiters-depth-2">)</span><span class="rainbow-delimiters-depth-1">)</span>
<span class="haskell-keyword">import</span> <span class="haskell-keyword">qualified</span> <span class="haskell-constructor">Language.Haskell.Interpreter</span> <span class="haskell-keyword">as</span> <span class="haskell-constructor">Hint</span>
<span class="haskell-keyword">import</span> <span class="haskell-constructor">Lucid</span>
<span class="haskell-keyword">import</span> <span class="haskell-constructor">System.IO</span> <span class="rainbow-delimiters-depth-1">(</span>hPutStrLn, stderr<span class="rainbow-delimiters-depth-1">)</span>
<span class="haskell-keyword">import</span> <span class="haskell-constructor">System.Process</span> <span class="rainbow-delimiters-depth-1">(</span>readProcess<span class="rainbow-delimiters-depth-1">)</span>
<span class="haskell-keyword">import</span> <span class="haskell-constructor">Template</span> <span class="rainbow-delimiters-depth-1">(</span><span class="haskell-constructor">BlogPost</span> <span class="rainbow-delimiters-depth-2">(</span><span class="haskell-operator">..</span><span class="rainbow-delimiters-depth-2">)</span>, <span class="haskell-constructor">IndexData</span> <span class="rainbow-delimiters-depth-2">(</span><span class="haskell-operator">..</span><span class="rainbow-delimiters-depth-2">)</span>, <span class="haskell-constructor">Link</span>, https<span class="rainbow-delimiters-depth-1">)</span>

<span class="haskell-definition">postsDir</span> <span class="haskell-operator">=</span> <span class="string">"posts/*/"</span>

<span class="haskell-definition">postsHaskell</span> <span class="haskell-operator">=</span> fromGlob <span class="haskell-operator">$</span> postsDir <span class="haskell-operator">&lt;&gt;</span> <span class="string">"*.hs"</span>

<span class="haskell-definition">postsHtml</span> <span class="haskell-operator">=</span> fromGlob <span class="haskell-operator">$</span> postsDir <span class="haskell-operator">&lt;&gt;</span> <span class="string">"*.html"</span>
 
<span class="haskell-definition"> redirectsDir</span> <span class="haskell-operator">::</span> <span class="haskell-type">IsString</span> s <span class="haskell-operator">=&gt;</span> s
<span class="haskell-definition"> redirectsDir</span> <span class="haskell-operator">=</span> <span class="string">"redirects"</span>
 
<span class="haskell-definition"> defaultIndexData</span> <span class="haskell-operator">::</span> <span class="haskell-type">IndexData</span>
<span class="haskell-definition"> defaultIndexData</span> <span class="haskell-operator">=</span>
 &#9474; <span class="haskell-constructor">IndexData</span>
&#9474; &#9474; <span class="rainbow-delimiters-depth-1">{</span> externals <span class="haskell-operator">=</span>
&#9474; &#9474; &#9474;   fmap
&#9474; &#9474; &#9474;   &#9474; <span class="rainbow-delimiters-depth-2">(</span>first https<span class="rainbow-delimiters-depth-2">)</span>
&#9474; &#9474; &#9474;   &#9474; <span class="rainbow-delimiters-depth-2">[</span> <span class="rainbow-delimiters-depth-3">(</span><span class="string">"twitter.com/1inguini"</span>, <span class="string">"Twitter"</span><span class="rainbow-delimiters-depth-3">)</span>,
&#9474; &#9474; &#9474;   &#9474; &#9474; <span class="rainbow-delimiters-depth-3">(</span><span class="string">"twitter.com/1inguini1tasita"</span>, <span class="string">"Twitter&#12398;&#39154;&#31934;&#12450;&#12459;&#12454;&#12531;&#12488;"</span><span class="rainbow-delimiters-depth-3">)</span>,
&#9474; &#9474; &#9474;   &#9474; &#9474; <span class="rainbow-delimiters-depth-3">(</span><span class="string">"github.com/1inguini"</span>, <span class="string">"GitHub"</span><span class="rainbow-delimiters-depth-3">)</span>,
&#9474; &#9474; &#9474;   &#9474; &#9474; <span class="rainbow-delimiters-depth-3">(</span><span class="string">"linguini.booth.pm"</span>, <span class="string">"BOOTH"</span><span class="rainbow-delimiters-depth-3">)</span>,
&#9474; &#9474; &#9474;   &#9474; &#9474; <span class="rainbow-delimiters-depth-3">(</span><span class="string">"www.amazon.co.jp/hz/wishlist/dl/invite/ieqolZ4?ref_=wl_share"</span>, <span class="string">"&#24178;&#12375;&#33419;"</span><span class="rainbow-delimiters-depth-3">)</span>,
&#9474; &#9474; &#9474;   &#9474; &#9474; <span class="rainbow-delimiters-depth-3">(</span><span class="string">"vrchat.com/home/user/usr_7be90808-2858-4707-b1b9-b2b5636ba686"</span>, <span class="string">"VRChat"</span><span class="rainbow-delimiters-depth-3">)</span>
&#9474; &#9474; &#9474;   &#9474; <span class="rainbow-delimiters-depth-2">]</span>,
&#9474; &#9474; &#9474; articles <span class="haskell-operator">=</span> <span class="haskell-constructor"><span class="rainbow-delimiters-depth-2">[]</span></span>
&#9474; &#9474; <span class="rainbow-delimiters-depth-1">}</span>

<span class="haskell-definition">main</span> <span class="haskell-operator">::</span> <span class="haskell-type">IO</span> <span class="haskell-constructor"><span class="rainbow-delimiters-depth-1">()</span></span>
<span class="haskell-definition">main</span> <span class="haskell-operator">=</span>
&#9474; hakyllWith defaultConfiguration <span class="rainbow-delimiters-depth-1">{</span>destinationDirectory <span class="haskell-operator">=</span> <span class="string">"docs"</span><span class="rainbow-delimiters-depth-1">}</span> <span class="haskell-operator">$</span>
&#9474; &#9474; <span class="haskell-keyword">let</span> pathAndFeedConfirguration <span class="haskell-operator">=</span> <span class="string">"Path&amp;FeedConfiguration"</span>
&#9474; &#9474; &#9474;<span class="haskell-keyword">in</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    create <span class="rainbow-delimiters-depth-1">[</span><span class="string">"index.html"</span><span class="rainbow-delimiters-depth-1">]</span> <span class="haskell-operator">$</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; route idRoute
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; compile <span class="haskell-operator">$</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; maybeIndex <span class="haskell-operator">&lt;-</span> unsafeCompiler <span class="haskell-operator">$</span> interpret <span class="string">"pages/Index.hs"</span> <span class="string">"index"</span> <span class="rainbow-delimiters-depth-1">(</span>Hint.as <span class="haskell-operator">::</span> <span class="haskell-type">IndexData</span> <span class="haskell-operator">-&gt;</span> <span class="haskell-type">Html</span> <span class="haskell-constructor"><span class="rainbow-delimiters-depth-2">()</span></span><span class="rainbow-delimiters-depth-1">)</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; <span class="haskell-keyword">case</span> maybeIndex <span class="haskell-keyword">of</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; <span class="haskell-constructor">Left</span> e <span class="haskell-operator">-&gt;</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; unsafeCompiler <span class="haskell-operator">$</span> hPutStrLn stderr <span class="haskell-operator">$</span> displayException e
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; fail <span class="string">"interpret"</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; <span class="haskell-constructor">Right</span> index <span class="haskell-operator">-&gt;</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; articles <span class="haskell-operator">&lt;-</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; &#9474; fmap <span class="rainbow-delimiters-depth-1">(</span>itemBody <span class="haskell-operator">&gt;&gt;&gt;</span> second feedTitle<span class="rainbow-delimiters-depth-1">)</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; &#9474; &#9474; <span class="haskell-operator">&lt;$&gt;</span> <span class="rainbow-delimiters-depth-1">(</span> loadAllSnapshots postsHaskell pathAndFeedConfirguration <span class="haskell-operator">::</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; &#9474; &#9474; &#9474;       <span class="haskell-type">Compiler</span> <span class="rainbow-delimiters-depth-2">[</span><span class="haskell-type">Item</span> <span class="rainbow-delimiters-depth-3">(</span><span class="haskell-type">FilePath</span>, <span class="haskell-type">FeedConfiguration</span><span class="rainbow-delimiters-depth-3">)</span><span class="rainbow-delimiters-depth-2">]</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; &#9474; &#9474; &#9474;   <span class="rainbow-delimiters-depth-1">)</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; makeHtml <span class="haskell-operator">$</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; &#9474; index defaultIndexData <span class="rainbow-delimiters-depth-1">{</span>articles <span class="haskell-operator">=</span> articles<span class="rainbow-delimiters-depth-1">}</span>

&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    match postsHaskell <span class="haskell-operator">$</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; route <span class="haskell-operator">$</span> setExtension <span class="string">"html"</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; compile <span class="haskell-operator">$</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; src <span class="haskell-operator">&lt;-</span> getResourceFilePath
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; <span class="rainbow-delimiters-depth-1">(</span><span class="haskell-constructor">Just</span> path<span class="rainbow-delimiters-depth-1">)</span> <span class="haskell-operator">&lt;-</span> getRoute <span class="haskell-operator">=&lt;&lt;</span> getUnderlying
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; result <span class="haskell-operator">&lt;-</span> unsafeCompiler <span class="haskell-operator">$</span> interpret src <span class="string">"post"</span> <span class="rainbow-delimiters-depth-1">(</span>Hint.as <span class="haskell-operator">::</span> <span class="haskell-type">BlogPost</span> <span class="haskell-type">Identity</span><span class="rainbow-delimiters-depth-1">)</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; <span class="haskell-keyword">case</span> result <span class="haskell-keyword">of</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; <span class="haskell-constructor">Left</span> e <span class="haskell-operator">-&gt;</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; unsafeCompiler <span class="haskell-operator">$</span> hPutStrLn stderr <span class="haskell-operator">$</span> displayException e
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; fail <span class="string">"interpret"</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; <span class="haskell-constructor">Right</span> blogpost <span class="haskell-operator">-&gt;</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; makeItem <span class="rainbow-delimiters-depth-1">(</span>path, feedConfig blogpost<span class="rainbow-delimiters-depth-1">)</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; &#9474; <span class="haskell-operator">&gt;&gt;=</span> saveSnapshot pathAndFeedConfirguration
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; &#9474; &#9474; &#9474; makeHtml <span class="haskell-operator">$</span> html blogpost

&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    match postsHtml <span class="haskell-operator">$</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; route idRoute
&#9474; &#9474; &#9474;<span class="rainbow-indent-depth-4">&#9474;</span>    &#9474; compile getResourceBody
            

<span class="haskell-definition">makeHtml</span> <span class="haskell-operator">::</span> <span class="haskell-type">Html</span> <span class="haskell-constructor"><span class="rainbow-delimiters-depth-1">()</span></span> <span class="haskell-operator">-&gt;</span> <span class="haskell-type">Compiler</span> <span class="rainbow-delimiters-depth-1">(</span><span class="haskell-type">Item</span> <span class="haskell-type">String</span><span class="rainbow-delimiters-depth-1">)</span>
<span class="haskell-definition">makeHtml</span> html <span class="haskell-operator">=</span>
&#9474; unsafeCompiler
&#9474; &#9474; <span class="rainbow-delimiters-depth-1">(</span> readProcess
&#9474; &#9474; &#9474;   <span class="string">"npx"</span>
&#9474; &#9474; &#9474;   <span class="rainbow-delimiters-depth-2">[</span><span class="string">"js-beautify"</span>, <span class="string">"--type=html"</span>, <span class="string">"-"</span><span class="rainbow-delimiters-depth-2">]</span>
&#9474; &#9474; &#9474;   <span class="rainbow-delimiters-depth-2">(</span>Text.unpack <span class="haskell-operator">$</span> renderText html<span class="rainbow-delimiters-depth-2">)</span>
&#9474; &#9474; <span class="rainbow-delimiters-depth-1">)</span>
&#9474; &#9474; <span class="haskell-operator">&gt;&gt;=</span> makeItem

<span class="haskell-definition">interpret</span> filepath expr as <span class="haskell-operator">=</span>
&#9474; Hint.runInterpreter <span class="haskell-operator">$</span> <span class="haskell-keyword">do</span>
&#9474; &#9474; Hint.loadModules <span class="rainbow-delimiters-depth-1">[</span>filepath<span class="rainbow-delimiters-depth-1">]</span>
&#9474; &#9474; Hint.setTopLevelModules <span class="rainbow-delimiters-depth-1">[</span><span class="string">"Main"</span><span class="rainbow-delimiters-depth-1">]</span>
&#9474; &#9474; Hint.setImports <span class="rainbow-delimiters-depth-1">[</span><span class="string">"Prelude"</span>, <span class="string">"Lucid"</span>, <span class="string">"Template"</span><span class="rainbow-delimiters-depth-1">]</span>
&#9474; &#9474; Hint.setImportsQ <span class="rainbow-delimiters-depth-1">[</span><span class="rainbow-delimiters-depth-2">(</span><span class="string">"Data.ByteString.Lazy"</span>, <span class="haskell-constructor">Just</span> <span class="string">"BS"</span><span class="rainbow-delimiters-depth-2">)</span><span class="rainbow-delimiters-depth-1">]</span>
&#9474; &#9474; Hint.interpret expr as
</pre>
            </section>
        </article>
    </main>
    <section>
        <h2>コメント欄</h2>
        <form onsubmit="var message = this.value;
this.value=&#39;&#39;;
this.placeholder=&#39;コメント送信中...&#39;;
var req = new XMLHttpRequest ();

req.open(
  &quot;POST&quot;,
  &#39;https://staticman-1inguini.herokuapp.com/v2/entry/1inguini/1inguini.github.io/master/comments&#39;,
  true
);

req.setRequestHeader(
  &#39;Content-Type&#39;,
  &#39;application/x-www-form-urlencoded;charset=UTF-8&#39;
);

req.onreadystatechange = function() {
  if (this.readyState === XMLHttpRequest.DONE &amp;&amp; this.status == 200) {
    this.placeholder=&#39;マサカリを投げる&#39;;
  }
}

var query =
  &#39;options[title]=&#39; + encodeURIComponent(&#39;ブログ生成にHintつかいはじめました&amp;Hakyll.loadAllSnapShotsで嵌まった&#39;)
  + &#39;&amp;options[path]=&#39; + encodeURIComponent(&#39;posts/Haskell/started_using_hint/&#39;)
  + &#39;&amp;fields[name]=&#39; + encodeURIComponent(this.name.value)
  + &#39;&amp;fields[message]=&#39; + encodeURIComponent(message);
if (this.twitter.value) {
  query += &#39;&amp;fields[twitter]=&#39; + encodeURIComponent(this.twitter.value);
}
req.send(query);

return false;
"><label>ハンドルネーム<input required onkeydown="if(this.keycode == 13) {
  this.form.twitter.focus();
}
" name="name" type="text"></label><label>twitter垢(任意)<input pattern="^(\w{1,15})$" onkeydown="if(this.keycode == 13) {
  this.form.message.focus();
}
" name="twitter" type="text" placeholder="1inguini"></label><textarea cols="100" required rows="10" name="message" placeholder="マサカリを投げる"></textarea><button type="submit">送信</button></form>
    </section>
    <footer>Copyright: © 2020 linguini. Site proudly generated by <a href="http://jaspervdj.be/hakyll" rel="noreferrer noopener" target="_blank">Hakyll</a>. Visit the site repository from <a href="https://github.com/1inguini/1inguini.github.io" rel="noreferrer noopener" target="_blank">here</a>.</footer>
</body>

</html>